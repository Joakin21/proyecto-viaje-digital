<app-header [userName]="usuario_logeado"></app-header>
<div class="row">

    <div class="col-md-6 search-and-attended-container">
        <div class="center-container">
            <form #paciente="ngForm" (ngSubmit)="buscarPaciente(paciente)">
                <div class="form-group">
                    <label id="rut-label" class="ml-3" for="formRut">{{"inicio.Search Patient" | translate}}</label>
                    <input type="text" class="form-control pt-4 pb-4 pl-4 fa" ngModel name="rut" id="formRut" placeholder="&#xf002; {{'inicio.Place_rut_paciente' | translate}}">
                </div>
                <div *ngIf="mostrar_error">
                    <p class="error-text">{{"inicio."+mensaje_respuesta | translate}}</p>
                </div>
                <button type="submit" class="btn btn-default lightblue-button">{{"inicio.Search" | translate}}</button>

            </form>
            <div class="mt-3">
                <button id="btn-newpatient" (click)="createNewPatient()" class="btn btn-default fa">&#xf067;</button>
                <div id="text-newpatient" class="d-inline ml-2">{{"inicio.Create a new patient" | translate}}</div>
            </div>
        </div>
    </div>
    <div class="col-md-6">
        <p *ngIf="mostrar_paciente_encontrado" class="text-center mt-5 attended-and-found-text">
            {{"inicio.Patient found" | translate}}</p>
        <p *ngIf="!mostrar_paciente_encontrado" class="text-center mt-5 attended-and-found-text">
            {{"inicio.Recently attended" | translate}}</p>
        <p *ngIf="pacientes_atendidos.length == 0 && !mostrar_paciente_encontrado" class="text-info text-center lightblue-text">{{"inicio.No patient attended" | translate}}</p>
        <div *ngIf="pacientes_atendidos.length > 0 || mostrar_paciente_encontrado" class="bg-white pl-4 pr-4 pb-4 container-mytable w-75">
            <table id="attended-table" class="table table-hover table-borderless">
                <thead class="bg-white">
                    <tr>
                        <th scope="col">{{"inicio.Name" | translate}}</th>
                        <th scope="col">{{"inicio.Rut" | translate}}</th>
                    </tr>
                </thead>
                <tbody *ngIf="mostrar_paciente_encontrado">
                    <tr class="border-radius" (click)="goToHistory()">
                        <td>{{nombre}} {{apellidos}}</td>
                        <td>{{rut}}</td>
                    </tr>
                </tbody>
                <tbody *ngIf="!mostrar_paciente_encontrado">
                    <tr *ngFor="let paciente of pacientes_atendidos" (click)="seleccionarDesdeLista(paciente)" class="border-radius">
                        <td>{{paciente["nombre"]}} {{paciente["apellidos"]}}</td>
                        <td>{{paciente["rut"]}}</td>
                    </tr>
                </tbody>

            </table>

        </div>
        <div *ngIf="mostrar_paciente_encontrado" class="text-center mt-3">
            <button (click)="ShowRecentlyAttended()" class="btn btn-default lightblue-button">{{"inicio.Show recently attended" | translate}}</button>
        </div>

    </div>
</div>